#!/bin/sh
#############################################
# koi2utfs
# рЕТЕЛПДЙТХЕФ УФТПЛХ УЙНЧПМПЧ ЙЪ KOI Ч Unicode
# 07.10.2003 sasco
# рПМХЮЕООЩК ФЕЛУФ ОЕМШЪС РЕТЕЛПДЙТПЧБФШ, Б ФП ЧУЕ ЙУРПТФЙФУС
#############################################

echo $1 | unix2dos | awk '  
{  
a="АБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЬЫЪЭЮЯабвгдеёжзийклмнопрстуфхцчшщьыъэюя" ; 
b="РђР‘Р’Р“Р”Р•РЃР–Р—РР™РљР›РњРќРћРџР РЎРўРЈР¤РҐР¦Р§РЁР©Р¬Р«РЄР­Р®РЇР°Р±РІРіРґРµС‘Р¶Р·РёР№РєР»РјРЅРѕРїСЂСЃС‚СѓС„С…С†С‡С€С‰СЊС‹СЉСЌСЋСЏ" 

   l = length($0);
   if ( substr($0,1,1) != "" )
     {
        if ( l > 0 )
           for (i=1;i <= l;i++)
           {
                sim = substr($0,i,1) ; 
                ip = index(a,sim) ;
                if (ip > 0) {sim = substr(b,ip*2-1,2)}; 
                printf sim ;
           }
        printf "\n" ;
     }
  }'

